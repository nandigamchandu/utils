"use strict";var e,r=require("io-ts"),t=require("fp-ts/lib/Either"),n=require("io-ts/lib/PathReporter"),u=require("date-fns"),i=require("io-ts-types/lib/date"),o=require("io-ts-types/lib/DateFromISOString"),a=require("io-ts-types/lib/BooleanFromString"),s=require("io-ts-types/lib/IntFromString"),f=require("io-ts-types/lib/NumberFromString"),c=(e=require("tcomb"))&&"object"==typeof e&&"default"in e?e.default:e;function p(e,r){if(!e){var t="Warning: "+r;console.warn(t);try{throw Error(t)}catch(e){}}}function F(e){throw new Error("Invariant failed")}function y(e,r){e||F()}function l(){}function d(e,r,t){void 0===t&&(t=1);for(var n=[],u=e;u<r;u+=t)n.push(u);return n}function m(e,r){for(var t=[],n=0;n<e;n++)t.push(r(n));return t}var x=m;function g(e){return Object.keys(e)}function D(e,r){var t={},n=g(e),u=Array.isArray(n),i=0;for(n=u?n:n[Symbol.iterator]();;){var o;if(u){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o,s=r(e[a],a);void 0!==s&&(t[a]=s)}return t}function b(){return u.startOfDay(new Date)}var h=r.union([i.date,o.DateFromISOString]);function v(e,r){var t={},n=g(e),u=Array.isArray(n),i=0;for(n=u?n:n[Symbol.iterator]();;){var o;if(u){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;r.includes(a)&&(t[a]=e[a])}return t}function A(e,r){var t={},n=g(e),u=Array.isArray(n),i=0;for(n=u?n:n[Symbol.iterator]();;){var o;if(u){if(i>=n.length)break;o=n[i++]}else{if((i=n.next()).done)break;o=i.value}var a=o;r.includes(a)||(t[a]=e[a])}return t}var T=function(e){try{return Promise.reject(new Error(r.string.is(e)?e:n.PathReporter.report(e).join("\n")))}catch(e){return Promise.reject(e)}};function E(e,r){var u=e.decode(r);return t.isRight(u)?u.right:F(n.PathReporter.report(u).join("\n"))}var k=E;function I(e,r){var u=e.decode(r);return e.is(r),n.PathReporter.report(u).join("\n"),t.isRight(u)?u.right:void 0}var S=I,w=r.literal;function j(e,r,t){return function(){for(var n=arguments.length,u=new Array(n),i=0;i<n;i++)u[i]=arguments[i];return E(e,u),E(r,t.apply(void 0,u))}}function O(e,r,t){return function(){try{for(var n=arguments.length,u=new Array(n),i=0;i<n;i++)u[i]=arguments[i];return E(e,u),Promise.resolve(t.apply(void 0,u)).then(function(e){return E(r,e)})}catch(e){return Promise.reject(e)}}}var C=r.brand(i.date,function(e){return i.date.is(e)},"DateOnly");function P(){return(P=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function z(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}var N=function(e){function r(r,t,n,u,i){var o;return(o=e.call(this,t,n,u,i)||this).keys=r,o._tag="EnumType",o}return z(r,e),r}(r.Type);function M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),u=1;u<t;u++)n[u-1]=arguments[u];function i(e){return r.string.is(e)&&n.includes(e)}return new N(n,e||"Enum<"+n.join(" | ")+">",i,function(e,t){return i(e)?r.success(e):r.failure(e,t)},r.identity)}var R=function(e){function r(r,t,n,u,i){var o;return(o=e.call(this,i,u.is,u.validate,u.encode)||this).optional=r,o.required=t,o.props=n,o._tag="ObjType",o}return z(r,e),r}(r.Type);function U(e,t,n){return function(e,t,n){var u=r.intersection([r.readonly(r.partial(e)),r.readonly(r.type(t))]);return new R(e,t,P({},e,{},t),u,n||u.name)}(e,t,n)}function L(e,t,n){return function(e,t,n){var u=r.exact(r.intersection([r.readonly(r.partial(e)),r.readonly(r.type(t))]));return new R(e,t,P({},e,{},t),u,n||u.name)}(e,t,n)}function q(e,r){return U({},e,r)}function _(e,r){return U(e,{},r)}function B(e){return c.isType(e)}function $(e){return"struct"===e.meta.kind}function V(e){return"interface"===e.meta.kind}function K(e){return"intersection"===e.meta.kind}function W(e){return"maybe"===e.meta.kind}function H(e){return"union"===e.meta.kind}function J(e){return"enums"===e.meta.kind}function G(e){return"tuple"===e.meta.kind}function Q(e){return"list"===e.meta.kind}function X(e){return"dict"===e.meta.kind}function Y(e){return"irreducible"===e.meta.kind}function Z(e){return"subtype"===e.meta.kind&&"Integer"===e.meta.name}var ee=function(e){return r.Array.is(e)?[]:r.UnknownRecord.is(e)?function(e){return D(e,ee)}(e):r.number.is(t=e)?0:r.string.is(t)?"":!r.boolean.is(t)&&(null==t?t:i.date.is(t)?b():void p(!1,"Unsupported value "+t));var t},re=function(e){function t(){var t;return(t=e.call(this,"FnType",function(e){return"function"==typeof e},function(e,n){return t.is(e)?r.success(e):r.failure(e,n)},r.identity)||this)._tag="FnType",t}return z(t,e),t}(r.Type);function te(e,t){return r.brand(e,function(r){return e.is(r)},t||"id<"+e.name)}var ne=te(r.Int,"IntID"),ue=te(r.string,"StrID"),ie=c.refinement(c.Number,function(e){return e>=0},"Positive"),oe=c.refinement(c.Number,function(e){return e<=0},"Negative"),ae=c.refinement(c.Integer,function(e){return e>=0},"PositiveInt"),se=c.refinement(c.Integer,function(e){return e<=0},"NegativeInt"),fe=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,ce=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,pe=c.refinement(c.String,function(e){return fe.test(e)},"Email"),Fe=c.refinement(c.String,function(e){return ce.test(e)},"Url"),ye=c.refinement(c.String,function(e){return e.toLowerCase()===e},"Lowercase"),le=c.refinement(c.String,function(e){return e.toUpperCase()===e},"Uppercase");function de(e){return c.refinement(c.String,function(r){return r===e})}function me(e,r){return void 0===r&&(r={strict:!1}),c.struct(D(e.props,xe),{name:e.name,strict:r.strict})}function xe(e){if("Int"===e.name)return c.Integer;if(e instanceof r.NumberType)return c.Number;if(e instanceof r.StringType)return c.String;if(e instanceof r.LiteralType)return de(e.value);if(e instanceof r.BooleanType)return c.Boolean;if("Date"===e.name)return c.Date;if("DateFromISOString"===e.name)return c.Date;if(e instanceof r.KeyofType)return c.enums(e.keys);if(e instanceof N)return c.enums.of(e.keys);if(e instanceof r.NullType||e instanceof r.UndefinedType||e instanceof r.VoidType)return c.Nil;if(e instanceof r.UnknownType)return c.Any;if(e instanceof R&&c.struct(D(e.props,xe),{name:e.name}),e instanceof r.InterfaceType)return me(e);if(e instanceof r.PartialType)return c.struct(D(e.props,function(e){return c.maybe(xe(e))}),{name:e.name});if(e instanceof r.ReadonlyType)return xe(e.type);if(e instanceof r.ExactType)return me(e.type,{strict:!0});if(e instanceof r.RefinementType)return c.refinement(xe(e.type),e.predicate);if(e instanceof r.ArrayType||e instanceof r.ReadonlyArrayType)return c.list(xe(e.type));if(e instanceof r.AnyArrayType)return c.list(c.Any);if(e instanceof r.IntersectionType)return c.intersection(e.types.map(xe));if(e instanceof r.UnionType)return c.union(e.types.map(xe));if(e instanceof r.TupleType)return c.tuple(e.types.map(xe));throw new Error("Unsupported "+e.name)}function ge(e){return 0===e.length?"":e[0].toUpperCase()+e.slice(1)}function De(e,r){if(0===e.length)return"";for(var t=e[0].toLowerCase(),n=1;n<e.length;n+=1)e[n]===e[n].toUpperCase()?t+=""+r+e[n].toLowerCase():t+=e[n];return t}var be=r.brand(i.date,function(e){return i.date.is(e)},"TimeOnly");function he(e){function r(e){return function(r){return e.includes(r.name)?r:void 0}}for(var t=arguments.length,n=new Array(t>1?t-1:0),u=1;u<t;u++)n[u-1]=arguments[u];return U(D(e.required,r(n.map(function(e){return e.name}))),D(e.optional,r(n.map(function(e){return e.name}))))}Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})}),Object.keys(t).forEach(function(e){"default"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})}),Object.keys(i).forEach(function(e){"default"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})}),Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})}),Object.keys(s).forEach(function(e){"default"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})}),Object.keys(f).forEach(function(e){"default"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})}),Object.defineProperty(exports,"PathReporter",{enumerable:!0,get:function(){return n.PathReporter}}),exports.ArrayMaxLength=function(e){return c.refinement(c.Array,function(r){return r.length<=e},"ArrayMaxLength")},exports.ArrayMinLength=function(e){return c.refinement(c.Array,function(r){return r.length>=e},"ArrayMinLength")},exports.DateOnly=C,exports.Email=pe,exports.EnumType=N,exports.FnType=re,exports.ISODate=h,exports.IntID=ne,exports.Length=function(e){return c.refinement(c.String,function(r){return r.length===e},"StringLength")},exports.Literal=de,exports.Lower=ye,exports.Max=function(e){return c.refinement(c.Number,function(r){return r<=e},"Max")},exports.MaxDate=function(e){return c.refinement(c.Date,function(r){return u.compareAsc(e,r)>=0},"MaxDate")},exports.MaxInt=function(e){return c.refinement(c.Integer,function(r){return r<=e},"MaxInt")},exports.MaxStringLength=function(e){return c.refinement(c.String,function(r){return r.length<=e},"MaxStringLength")},exports.Min=function(e){return c.refinement(c.Number,function(r){return r>=e},"Min")},exports.MinDate=function(e){return c.refinement(c.Date,function(r){return u.compareAsc(e,r)<=0},"MinDate")},exports.MinInt=function(e){return c.refinement(c.Integer,function(r){return r>=e},"MinInt")},exports.MinStringLength=function(e){return c.refinement(c.String,function(r){return r.length>=e},"MinStringLength")},exports.Negative=oe,exports.NegativeInt=se,exports.ObjType=R,exports.Positive=ie,exports.PositiveInt=ae,exports.StrID=ue,exports.TimeOnly=be,exports.Upper=le,exports.Url=Fe,exports.assert=function(e,r){},exports.assertCast=I,exports.buildArray=x,exports.buildObject=D,exports.camelCaseToHyphenated=function(e){return De(e,"-")},exports.camelCaseToPhrase=function(e){return ge(De(e," "))},exports.camelCaseToSpaced=function(e){return De(e," ")},exports.capitalize=ge,exports.capitalizeAll=function(e,r,t){return void 0===r&&(r=" "),void 0===t&&(t=" "),e.split(r).map(ge).join(t)},exports.cast=E,exports.checked=function(e,t,n){return j(r.tuple(e),t,n)},exports.checkedAsync=function(e,t,n){return O(r.tuple(e),t,n)},exports.chop=function(e,r){return void 0===r&&(r="/"),0===e.length?"":e.endsWith(r)?e.slice(0,e.length-1):e},exports.debug=function(e,r){},exports.debugCast=S,exports.empty=function e(t){if("Int"===t.name||t instanceof r.NumberType)return 0;if(t instanceof r.StringType)return"";if(t instanceof r.BooleanType)return!1;if("Date"===t.name)return b();if("DateFromISOString"===t.name)return b();if(t instanceof r.KeyofType)return g(t.keys)[0];if(t instanceof N)return t.keys[0];if(t instanceof r.LiteralType)return t.value;if(t instanceof r.NullType)return null;if(!(t instanceof r.UndefinedType||t instanceof r.VoidType)){if(t instanceof r.UnknownType)return"";if(t instanceof r.InterfaceType||t instanceof r.PartialType||t instanceof R)return D(t.props,e);if(t instanceof r.ExactType||t instanceof r.ReadonlyType||t instanceof r.RefinementType)return e(t.type);if(t instanceof r.ReadonlyArrayType||t instanceof r.ArrayType||t instanceof r.AnyArrayType)return[];if(t instanceof r.IntersectionType)return t.types.map(e).reduce(function(e,r){return P({},e,{},r)});if(t instanceof r.UnionType)return e(t.types[0]);if(t instanceof r.TupleType)return t.types.map(e);throw new Error("Unsupported type: "+t.name)}},exports.emptyFromRT=function e(r){if(!B(r))throw new Error("I have no idea about what do with a function");if(y(r&&r.meta&&r.meta.kind),Z(r))return 0;if($(r))return r(D(r.meta.props,e));if(V(r))return D(r.meta.props,e);if(Q(r))return[];if(X(r))return{};if(K(r))return r.meta.types.map(e).reduce(function(e,r){return P({},e,{},r)});if(W(r))return e(r.meta.type);if(H(r))return e(r.meta.types[0]);if(J(r))return g(r.meta.map)[0];if(G(r))return r.meta.types.map(e);if(Y(r))return function(e){switch(y("irreducible"===e.meta.kind),e.meta.name){case"Number":return 0;case"Any":case"String":return"";case"Boolean":return!1;case"Date":return new Date;case"Function":return l;case"RegExp":return/(?:)/;case"Nil":return;case"Error":return new Error("empty error");case"Object":return{};case"Array":return[];default:throw new Error("Unsupported tcomb type: "+e.meta.kind+": "+e.meta.name)}}(r);throw new Error("Unsupported tcomb type: "+r.meta.kind)},exports.emptyFromValue=ee,exports.enumerate=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return M.apply(void 0,[void 0].concat(r))},exports.enums=M,exports.error=function(e){},exports.exactObj=L,exports.extractSegment=function(e,r,t){if(0===e.length)return"";var n=e.slice(r),u=n.indexOf(t);return-1===u?n.trim():n.slice(0,u).trim()},exports.fatal=F,exports.fn=function(){return new re},exports.freeze=function(e){return e},exports.getProp=function(e,r){return e.props[r]},exports.getProps=function(e){return e.props},exports.id=te,exports.interval=function(e,r){void 0===r&&(r=l);try{return Promise.resolve(new Promise(function(t){return setInterval(function(){return t(r())},e)}))}catch(e){return Promise.reject(e)}},exports.isDict=X,exports.isEnums=J,exports.isInteger=Z,exports.isInterface=V,exports.isIntersection=K,exports.isIrreducible=Y,exports.isList=Q,exports.isMaybe=W,exports.isStruct=$,exports.isTuple=G,exports.isType=B,exports.isUnion=H,exports.jsonStringify=function(e){return JSON.stringify(e,null,2)},exports.keys=g,exports.lit=w,exports.nop=l,exports.obj=U,exports.objCombine=function(e,r,t){return U(P({},e.optional,{},r.optional),P({},e.required,{},r.required),t)},exports.objOmit=function(e,r,t){return U(A(e.optional,r),A(e.required,r),t)},exports.objPick=function(e,r,t){return U(v(e.optional,r),v(e.required,r),t)},exports.omit=A,exports.omitProps=function(e,r){return A(e,r)},exports.opt=_,exports.pick=v,exports.pickBy=he,exports.pickInts=function(e){return he(e,r.Int)},exports.pickNumbers=function(e){return he(e,r.number)},exports.pickNumeric=function(e){return he(e,r.number,r.Int)},exports.pickProps=function(e,r){return v(e,r)},exports.pickStringly=function(e){return he(e,r.Int,r.number,r.string,r.boolean)},exports.pickStrings=function(e){return he(e,r.string)},exports.range=function(e,r,t){return r?d(e,r,t):d(0,e)},exports.rejected=T,exports.repeatedly=m,exports.req=q,exports.rtFromSpec=xe,exports.rtFromValue=function e(r){return c.Array.is(r)?function(r){return c.list(void 0!==r[0]?e(r[0]):c.Any)}(r):c.Object.is(r)?function(r){return c.struct(D(r,e))}(r):function(e){if(c.Integer.is(e))return c.Integer;if(c.Number.is(e))return c.Number;if(c.String.is(e))return c.String;if(c.Boolean.is(e))return c.Boolean;if(c.RegExp.is(e))return c.RegExp;if(c.Function.is(e))return c.Function;if(c.Error.is(e))return c.Error;if(c.Nil.is(e))return c.Nil;throw new Error("Unsupported #{value}")}(r)},exports.timeout=function(e,r){void 0===r&&(r=l);try{return Promise.resolve(new Promise(function(t){return setTimeout(function(){return t(r())},e)}))}catch(e){return Promise.reject(e)}},exports.toBoolean=function(e){return E(a.BooleanFromString,e)},exports.toDate=function(e){return E(o.DateFromISOString,e)},exports.toExact=function(e,r){return L(e.optional,e.required,r)},exports.toInt=function(e){return E(s.IntFromString,e)},exports.toLower=De,exports.toNumber=function(e){return E(f.NumberFromString,e)},exports.toOpt=function(e,r){return _(e.props,r)},exports.toPromise=function(e){try{return Promise.resolve(t.isRight(e)?e.right:T(e))}catch(e){return Promise.reject(e)}},exports.toReq=function(e,r){return q(e.props,r)},exports.today=b,exports.tupleChecked=j,exports.tupleCheckedAsync=O,exports.verify=y,exports.verifyCast=k,exports.warn=p;
//# sourceMappingURL=technoidentity-utils.cjs.production.min.js.map
